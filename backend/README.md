D-Gnome Horoscope ‚Äî backend

This Express backend provides:
- / (GET) ‚Äî status
- /api/genai (POST) ‚Äî proxy to Google Generative Language API (use server-side API key)
- /api/moon (GET) ‚Äî scrape moon data from my-calend.ru (cached)
- /api/horoscope/:sign (GET) ‚Äî placeholder horoscope
- /api/day-card (GET) ‚Äî placeholder card

Setup
1. Copy `.env.example` to `.env` and set `GOOGLE_API_KEY` and `FRONTEND_URL`.
2. Install dependencies:

   npm install

3. Run locally:

   # PowerShell
   $Env:GOOGLE_API_KEY="your_google_key"
   npm run dev

Deployment (Render)
1. Create a new Web Service on Render and connect this repository (or the folder containing `backend/`).
2. You can use the provided `render.yaml` manifest ‚Äî Render will read it when you create a new service from the repo. Alternatively, create a Web Service manually:
   - Build command: `npm install`
   - Start command: `npm start` (or use the `Procfile` already included)
3. Set environment variables in Render service settings:
   - `GOOGLE_API_KEY` ‚Äî –≤–∞—à —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–ª—é—á Google Generative API (–ù–ï —Ö—Ä–∞–Ω–∏—Ç–µ –≤ —Ñ—Ä–æ–Ω—Ç–µ)
   - `FRONTEND_URL` ‚Äî URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä `https://d-gnome-horoscope-miniapp-frontend.onrender.com`
4. Deploy. After successful deploy:
   - Open `<your-render-url>/` ‚Äî should return the status JSON.
   - `<your-render-url>/api/moon` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª—É–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

Render checklist
- Ensure repository root contains the `backend` folder or that you point Render to the `backend` subdirectory when creating the service.
- Include `render.yaml` in the repo root (already added in `backend/render.yaml`) to auto-provision service settings.


Frontend integration
- Replace direct Google GenAI calls with POST to `/api/genai` on your backend.
- For moon data, request GET `/api/moon`.

Notes
- The moon scraping is best-effort; my-calend.ru may change its DOM ‚Äî adjust selectors if needed.
- Keep `GOOGLE_API_KEY` secret and never embed it in frontend code.
# üßô‚Äç‚ôÇÔ∏è –ì–Ω–æ–º–∏–π –ì–æ—Ä–æ—Å–∫–æ–ø API v2.0

Enhanced Backend –¥–ª—è Telegram WebApp —Å –≥–æ—Ä–æ—Å–∫–æ–ø–∞–º–∏, –∫–∞—Ä—Ç–∞–º–∏ –¥–Ω—è –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏.

## ‚ú® –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ v2.0

### üéØ **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞, –≤—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è, –ª–æ–∫–∞—Ü–∏—è)
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ–º—ã (—Å–≤–µ—Ç–ª–∞—è/—Ç–µ–º–Ω–∞—è)
- –í—ã–±–æ—Ä —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### üì± **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –≥–æ—Ä–æ—Å–∫–æ–ø—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot API
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### üåê **–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
- –†–µ–ø–æ—Å—Ç –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –∏ –∫–∞—Ä—Ç –¥–Ω—è
- –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –¥–ª—è —Ä–µ–ø–æ—Å—Ç–æ–≤
- –°—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –æ–±—â–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ–ø–æ—Å—Ç–æ–≤ —Å –∫—Ä–∞—Å–∏–≤—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏

### üíé **–ü—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–∏**
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≥–æ—Ä–æ—Å–∫–æ–ø—ã —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–æ –∑–Ω–∞–∫–∞–º –∑–æ–¥–∏–∞–∫–∞
- –ö–∞—Ä—å–µ—Ä–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–¥–æ—Ä–æ–≤—å—é
- –°—á–∞—Å—Ç–ª–∏–≤—ã–µ —á–∏—Å–ª–∞ –∏ —Ü–≤–µ—Ç–∞
- –í–ª–∏—è–Ω–∏–µ –õ—É–Ω—ã –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã

### üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### üîÆ **–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤
- Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ–º–ø–ª–µ–π—Ç—ã
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –†–µ–∞–ª—å–Ω—ã–µ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

## üöÄ –ù–æ–≤—ã–µ API Endpoints

### –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
```http
POST /api/user/settings    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
GET  /api/user/settings    # –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

### –ü—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–∏
```http
POST /api/horoscope/premium    # –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–º–∏—É–º –≥–æ—Ä–æ—Å–∫–æ–ø
```

### –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```http
POST /api/share               # –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ—Å—Ç
GET  /api/shared/{id}         # –ü–æ–ª—É—á–∏—Ç—å –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
```http
GET /api/analytics/user       # –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
GET /api/analytics/global     # –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

## üóÑÔ∏è –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î

- **user_settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **user_analytics** - –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **shared_content** - –†–µ–ø–æ—Å—Ç—ã –∏ –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- **push_notifications** - –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Render

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [Render.com](https://render.com)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —ç—Ç–æ—Ç GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –í—ã–±–µ—Ä–∏—Ç–µ "Web Service"
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `BOT_TOKEN`: –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram –±–æ—Ç–∞
   - `API_KEY_HOROSCOPE`: –ö–ª—é—á –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - `NODE_ENV`: `production`

## üîß –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python main.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
python test_enhanced_api.py
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- FastAPI 0.104+
- SQLite3 (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
- Requests –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ Telegram WebApp –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- Health check endpoint: `/health`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—å
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- –°—á–µ—Ç—á–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test_enhanced_api.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

```bash
python test_enhanced_api.py
```

## üìñ API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

---

**–í–µ—Ä—Å–∏—è:** 2.0.0  
**–ê–≤—Ç–æ—Ä:** –ö–æ–º–∞–Ω–¥–∞ –ê—Å—Ç—Ä–æ –ì–Ω–æ–º  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** MIT

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### üåê **–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
- –†–µ–ø–æ—Å—Ç –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤ –∏ –∫–∞—Ä—Ç –¥–Ω—è
- –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –¥–ª—è —Ä–µ–ø–æ—Å—Ç–æ–≤
- –°—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –æ–±—â–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ–ø–æ—Å—Ç–æ–≤ —Å –∫—Ä–∞—Å–∏–≤—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏

### üíé **–ü—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–∏**
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≥–æ—Ä–æ—Å–∫–æ–ø—ã —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–æ –∑–Ω–∞–∫–∞–º –∑–æ–¥–∏–∞–∫–∞
- –ö–∞—Ä—å–µ—Ä–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–¥–æ—Ä–æ–≤—å—é
- –°—á–∞—Å—Ç–ª–∏–≤—ã–µ —á–∏—Å–ª–∞ –∏ —Ü–≤–µ—Ç–∞
- –í–ª–∏—è–Ω–∏–µ –õ—É–Ω—ã –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å–∞–π—Ç—ã

### üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### üîÆ **–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ API –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤
- Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ–º–ø–ª–µ–π—Ç—ã
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –†–µ–∞–ª—å–Ω—ã–µ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

## üöÄ –ù–æ–≤—ã–µ API Endpoints

### –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
```http
POST /api/user/settings    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
GET  /api/user/settings    # –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

### –ü—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–∏
```http
POST /api/horoscope/premium    # –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–º–∏—É–º –≥–æ—Ä–æ—Å–∫–æ–ø
```

### –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```http
POST /api/share               # –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ—Å—Ç
GET  /api/shared/{id}         # –ü–æ–ª—É—á–∏—Ç—å –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
```http
GET /api/analytics/user       # –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
GET /api/analytics/global     # –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

## üóÑÔ∏è –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î

- **user_settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **user_analytics** - –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **shared_content** - –†–µ–ø–æ—Å—Ç—ã –∏ –æ–±—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- **push_notifications** - –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Render

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [Render.com](https://render.com)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —ç—Ç–æ—Ç GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –í—ã–±–µ—Ä–∏—Ç–µ "Web Service"
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `BOT_TOKEN`: –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram –±–æ—Ç–∞
   - `API_KEY_HOROSCOPE`: –ö–ª—é—á –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - `NODE_ENV`: `production`

## üîß –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python main.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
python test_enhanced_api.py
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- FastAPI 0.104+
- SQLite3 (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)
- Requests –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ Telegram WebApp –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- Health check endpoint: `/health`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—å
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- –°—á–µ—Ç—á–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## üéÆ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test_enhanced_api.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

```bash
python test_enhanced_api.py
```

## üìñ API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

---

**–í–µ—Ä—Å–∏—è:** 2.0.0  
**–ê–≤—Ç–æ—Ä:** –ö–æ–º–∞–Ω–¥–∞ –ê—Å—Ç—Ä–æ –ì–Ω–æ–º  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** MIT

